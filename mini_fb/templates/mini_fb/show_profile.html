<!-- templates/show_all_profiles.html -->
<!-- mini_fb/templates/mini_fb/show_all_profiles.html -->

{% extends 'mini_fb/base.html' %}
{% block content %}
<main class="grid-container">
            <img class="profile-img" src="{{profile.image_url}}" alt="{{article.image_url}}">
            <div> 
                <br><br><br>
                <h2>{{profile.first}} {{profile.last}}</h2>
                <h3>{{profile.city}}</h3>
                <h3>{{profile.email}}</h3>    
            </div> 
</main>

<!-- show the StatusMessages -->
<div class="box">
    <br>
    <a class="status" href="{% url 'update_profile' profile.pk %}">Update Profile</a>
    <a class="status" href="{% url 'create_status' profile.pk %}">Create Status Message</a>
    {% if profile.get_statusmessages %}
        <h2>Status Messages</h2>
        <!-- call the get_statusmessages method on the article object -->
        <!-- {{article.get_statusmessages}} -->
        {% for s in profile.get_statusmessages %}
        <div>
            {% for img in s.get_images %}
                <img class="post-img" src='{{img.image_file.url}}' alt='{{img.image_file.url}}'>
            {% endfor %}
            <br>
            <strong> {{s.profile.first}} {{s.profile.last}} at {{s.timestamp}}</strong>
            <p>{{s.message}}</p>
        </div>
        {% endfor %}
    {% else %}
        <h2>No StatusMessages</h2>
    {% endif %}
</div>
{% endblock %}